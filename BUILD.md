# Art in Heaven - Build Notes

## Asset Files

### CSS
- `assets/css/elegant-theme.css` — Main frontend theme
- `assets/css/elegant-theme.php` — Dynamic theme CSS generator (admin color settings)
- `assets/css/aih-admin.css` — Admin panel styles

### JavaScript
- `assets/js/aih-frontend.js` — Shared frontend utilities
- `assets/js/aih-gallery.js` — Gallery page (bidding, favorites, filtering)
- `assets/js/aih-single-item.js` — Single art piece page
- `assets/js/aih-my-bids.js` — My Bids page
- `assets/js/aih-admin.js` — Admin panel
- `assets/js/aih-sse.js` — Server-Sent Events client (real-time updates)
- `assets/js/aih-push.js` — Web Push notification registration
- `assets/js/aih-sw.js` — Service Worker (PWA + push)

### Fonts
- `assets/fonts/OpenSans-Bold.ttf` — Used for watermark text rendering

### Images
- `assets/images/logo.png` — Plugin logo
- `assets/images/icon-20.png` — Small PWA icon
- `assets/images/icon-192.png` — Medium PWA icon
- `assets/images/icon-512.png` — Large PWA icon

## Asset Optimization

CSS and JS assets are minified automatically during CI/CD deployment:

- Source files (`.css`, `.js`) are committed to the repository
- Minified files (`.min.css`, `.min.js`) are generated by esbuild in GitHub Actions
- In production, WordPress loads `.min` files automatically
- Set `SCRIPT_DEBUG` to `true` in `wp-config.php` to load unminified source files
- Minified files are in `.gitignore` and should never be committed

The server has Brotli compression enabled (via nginx), which further compresses the minified files.

## Deployment

Deployment is automated via GitHub Actions on merge to `main`:

1. Release-drafter creates a versioned release with auto-generated notes
2. Two zip artifacts are built and uploaded:
   - `art-in-heaven.zip` — Pre-packaged with vendor dependencies
   - `art-in-heaven-source.zip` — Source only (no vendor)
3. rsync deploys to the production server
4. WordPress rewrite rules and cache are flushed
